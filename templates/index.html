<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>FoodSense AI</title>
<style>
    /* ===== DARK THEME BODY ===== */
    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: #121212;
        color: #e0e0e0;
        text-align: center;
        padding: 40px;
    }

    h1 {
        color: #00b4d8;
        margin-bottom: 10px;
    }

    p.info {
        color: #cfd8dc;
        font-size: 16px;
        max-width: 700px;
        margin: 0 auto 30px auto;
        line-height: 1.6;
    }

    #upload-section {
        margin: 20px 0;
    }

    input[type="file"] {
        padding: 10px;
        font-size: 16px;
        background-color: #1e1e1e;
        color: #e0e0e0;
        border: 1px solid #444;
        border-radius: 5px;
        cursor: pointer;
    }

    input[type="submit"] {
        padding: 10px 20px;
        font-size: 16px;
        background-color: #00b4d8;
        color: #121212;
        border: none;
        cursor: pointer;
        margin-left: 10px;
        border-radius: 5px;
        transition: 0.3s;
    }

    input[type="submit"]:hover {
        background-color: #0096c7;
    }

    #preview {
        margin-top: 20px;
        max-width: 300px;
        border: 2px solid #00b4d8;
        border-radius: 10px;
        transition: transform 0.3s ease-in-out;
    }

    #preview.show {
        transform: scale(1.05);
    }

    #loading {
        display: none;
        margin: 20px;
        font-weight: bold;
        color: #90e0ef;
        font-size: 18px;
    }

    #result {
        margin-top: 20px;
        font-size: 22px;
        font-weight: bold;
        color: #00b4d8;
        background-color: #1e1e1e;
        display: inline-block;
        padding: 12px 25px;
        border-radius: 12px;
        opacity: 0;
        transform: translateY(-20px);
        transition: all 0.6s ease;
    }

    #result.show {
        opacity: 1;
        transform: translateY(0);
    }
</style>
</head>
<body>

<h1>FoodSense AI</h1>
<p class="info">
    This model is trained on <strong>11 food categories</strong> using a small variety of data.  
    It tries its best to sense food accurately. Upload an image to see the prediction.
</p>

<div id="upload-section">
    <form id="upload-form" enctype="multipart/form-data">
        <input type="file" name="file" accept="image/*" required>
        <input type="submit" value="Predict">
    </form>
</div>

<img id="preview" src="" alt="Image Preview" style="display:none;">
<p id="loading">Predictingâ€¦ Please wait!</p>
<div id="result"></div>

<script>
const form = document.getElementById('upload-form');
const preview = document.getElementById('preview');
const loading = document.getElementById('loading');
const resultEl = document.getElementById('result');

const fileInput = form.querySelector('input[name="file"]');

// Show image preview with small motion
fileInput.addEventListener('change', () => {
    const file = fileInput.files[0];
    if(file){
        preview.src = URL.createObjectURL(file);
        preview.style.display = "block";
        preview.classList.add("show");
        resultEl.innerText = "";
        resultEl.classList.remove("show");
    }
});

form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const file = fileInput.files[0];
    if(!file) return;

    const formData = new FormData();
    formData.append("file", file);

    loading.style.display = "block";
    resultEl.classList.remove("show");
    resultEl.innerText = "";

    try {
        const response = await fetch('/predict', {
            method: 'POST',
            body: formData
        });
        const data = await response.json();

        if(data.error){
            resultEl.innerText = `Error: ${data.error}`;
        } else {
            resultEl.innerText = `Prediction: ${data.prediction} | Confidence: ${data.confidence}`;
        }

        // Animate result after prediction
        setTimeout(() => {
            resultEl.classList.add("show");
        }, 100);

    } catch (err) {
        resultEl.innerText = `Error: ${err}`;
        resultEl.classList.add("show");
    } finally {
        loading.style.display = "none";
    }
});
</script>

</body>
</html>